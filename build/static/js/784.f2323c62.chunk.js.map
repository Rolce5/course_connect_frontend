{"version":3,"file":"static/js/784.f2323c62.chunk.js","mappings":"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","sources":["components/LessonContent.js","components/QuizReviewSection.js"],"sourcesContent":["import { useState } from \"react\";\nimport { FiBookOpen, FiInfo, FiAlertTriangle, FiCheck } from \"react-icons/fi\";\nimport { Link } from \"react-router-dom\";\nimport QuizReviewSection from \"./QuizReviewSection\";\n\nconst LessonContent = ({\n  currentLesson,\n  notes,\n  setNotes,\n  handleNoteSave,\n  handleVideoEnded,\n  quizCompleted,\n  currentQuiz,\n  quizScore,\n  bestScore,\n  quizAttempts,\n  weakTopics,\n  attemptsLeft,\n  selectedAnswers,\n  courseId,\n  prepareQuizRetake,\n}) => {\n  const [isSaving, setIsSaving] = useState(false);\n\n  const handleSave = async () => {\n    setIsSaving(true);\n    await handleNoteSave();\n    setIsSaving(false);\n  };\n\n  return (\n    <div className=\"flex-1 overflow-y-auto p-4 lg:p-6 bg-white\">\n      <div className=\"max-w-4xl mx-auto\">\n        <h1 className=\"text-xl lg:text-2xl font-bold mb-4\">\n          {currentLesson.title}\n        </h1>\n\n        {currentLesson.videoUrl && (\n          <div className=\"mb-6 aspect-w-16 aspect-h-9 bg-black rounded-lg overflow-hidden\">\n            <video\n              controls\n              className=\"w-full h-full object-cover\"\n              onEnded={handleVideoEnded}\n              autoPlay\n            >\n              <source src={currentLesson.videoUrl} type=\"video/mp4\" />\n              Your browser does not support the video tag.\n            </video>\n          </div>\n        )}\n\n        {quizCompleted && (\n          <QuizReviewSection\n            quizScore={quizScore}\n            bestScore={bestScore}\n            quizAttempts={quizAttempts}\n            weakTopics={weakTopics}\n            currentQuiz={currentQuiz}\n            selectedAnswers={selectedAnswers}\n            attemptsLeft={attemptsLeft}\n            courseId={courseId}\n            prepareQuizRetake={prepareQuizRetake}\n          />\n        )}\n\n        <div className=\"mb-6 lg:mb-8 h-[70vh] overflow-y-auto\">\n          <div\n            className=\"prose max-w-none w-full text-left\"\n            dangerouslySetInnerHTML={{ __html: currentLesson.content }}\n          />\n        </div>\n\n        <div className=\"border-t border-gray-200 pt-4 lg:pt-6\">\n          <h3 className=\"text-lg font-semibold mb-3 lg:mb-4\">Your Notes</h3>\n          <textarea\n            value={notes}\n            onChange={(e) => setNotes(e.target.value)}\n            className=\"w-full h-32 lg:h-40 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm lg:text-base\"\n            placeholder=\"Write your notes here...\"\n          />\n          <div className=\"flex justify-end mt-2\">\n            <button\n              onClick={handleSave}\n              disabled={isSaving}\n              className=\"px-3 py-1.5 lg:px-4 lg:py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm lg:text-base disabled:opacity-50\"\n            >\n              {isSaving ? \"Saving...\" : \"Save Notes\"}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LessonContent;\n","// import { FiAlertTriangle, FiBookOpen, FiCheck, FiInfo } from \"react-icons/fi\";\n// import { Link } from \"react-router-dom\";\n\n// const QuizReviewSection = ({\n//   quizScore,\n//   bestScore,\n//   quizAttempts,\n//   weakTopics,\n//   currentQuiz,\n//   selectedAnswers,\n//   attemptsLeft,\n//   courseId,\n//   prepareQuizRetake,\n// }) => {\n//   console.log(\"current quiz:\", currentQuiz);\n//   console.log(\"Weak topics quiz:\", weakTopics);\n//   return (\n//     <div className=\"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200\">\n//       <div className=\"flex flex-col space-y-4\">\n//         <div className=\"flex items-center justify-between\">\n//           <div className=\"flex items-center\">\n//             {quizScore >= 70 ? (\n//               <FiCheck className=\"text-green-500 mr-2 text-xl\" />\n//             ) : (\n//               <FiInfo className=\"text-yellow-500 mr-2 text-xl\" />\n//             )}\n//             <h3 className=\"text-lg font-semibold\">\n//               Quiz {quizScore >= 70 ? \"Passed\" : \"Review Needed\"}\n//               {\": \"} {quizScore}%\n//             </h3>\n//           </div>\n//           <div className=\"text-sm text-gray-600\">\n//             Best: {bestScore}% • Attempts: {quizAttempts.length}/3\n//           </div>\n//         </div>\n\n//         {quizScore < 70 ? (\n//           <div className=\"p-3 bg-yellow-50 border border-yellow-200 rounded\">\n//             <div className=\"flex items-start\">\n//               <FiBookOpen className=\"text-yellow-500 mr-2 mt-0.5 flex-shrink-0\" />\n//               <div>\n//                 <h4 className=\"font-medium\">Recommended Review</h4>\n//                 <p className=\"text-sm mb-2\">\n//                   Focus on these topics before retrying:\n//                 </p>\n//                 <ul className=\"space-y-2\">\n//                   {weakTopics.map((topic, i) => {\n//                     const questionWithTopic = currentQuiz.questions.find(\n//                       (q) => q.topic === topic\n//                     );\n//                     return (\n//                       <li key={i} className=\"flex items-start\">\n//                         <FiAlertTriangle className=\"text-red-400 mr-2 mt-0.5 flex-shrink-0\" />\n//                         <div>\n//                           <p className=\"font-medium\">{topic}</p>\n//                           {questionWithTopic?.hint && (\n//                             <p className=\"text-xs text-gray-600 mt-1\">\n//                               {questionWithTopic.hint} dd\n//                             </p>\n//                           )}\n//                           <Link\n//                             to={`/courses/${courseId}/resources?topic=${encodeURIComponent(topic)}`}\n//                             className=\"text-xs text-blue-600 hover:underline mt-1 inline-block\"\n//                           >\n//                             Review Resources\n//                           </Link>\n//                         </div>\n//                       </li>\n//                     );\n//                   })}\n//                 </ul>\n//               </div>\n//             </div>\n//           </div>\n//         ) : (\n//           <div className=\"p-3 bg-green-50 border border-green-200 rounded\">\n//             <div className=\"flex items-start\">\n//               <FiCheck className=\"text-green-500 mr-2 mt-0.5 flex-shrink-0\" />\n//               <div>\n//                 <h4 className=\"font-medium\">Strong Understanding</h4>\n//                 <p className=\"text-sm\">You demonstrated mastery of:</p>\n//                 <ul className=\"list-disc pl-5 mt-1 text-sm space-y-1\">\n//                   {Array.from(\n//                     new Set(\n//                       currentQuiz.questions\n//                         .filter(\n//                           (q) =>\n//                             selectedAnswers[q.id] === q.correctAnswer && q.auestion_text\n//                         )\n//                         .map((q) => q.auestion_text)\n//                     )\n//                   ).map((auestion_text, i) => (\n//                     <li key={i}>{auestion_text}</li>\n//                   ))}\n//                 </ul>\n//               </div>\n//             </div>\n//           </div>\n//         )}\n\n//         {attemptsLeft > 0 && quizScore < 70 && (\n//           <div className=\"border-t pt-4\">\n//             <div className=\"flex items-start mb-3\">\n//               <FiInfo className=\"text-blue-500 mr-2 mt-0.5 flex-shrink-0\" />\n//               <div>\n//                 <h4 className=\"font-medium\">Ready for Retake?</h4>\n//                 <p className=\"text-sm\">\n//                   After reviewing, you'll get a new set of questions on the same\n//                   topics.\n//                 </p>\n//               </div>\n//             </div>\n//             <button\n//               onClick={prepareQuizRetake}\n//               className=\"w-full px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg\"\n//             >\n//               Retake Quiz ({attemptsLeft}{\" \"}\n//               {attemptsLeft === 1 ? \"attempt\" : \"attempts\"} left)\n//             </button>\n//           </div>\n//         )}\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default QuizReviewSection;\n// import {\n//   FiAlertTriangle,\n//   FiBookOpen,\n//   FiCheck,\n//   FiInfo,\n//   FiLock,\n//   FiX,\n// } from \"react-icons/fi\";\n// import { Link } from \"react-router-dom\";\n// import { motion, AnimatePresence } from \"framer-motion\";\n// import { useState } from \"react\";\n\n// const QuizReviewSection = ({\n//   quizScore,\n//   bestScore,\n//   quizAttempts,\n//   weakTopics,\n//   currentQuiz,\n//   selectedAnswers,\n//   attemptsLeft,\n//   courseId,\n//   prepareQuizRetake,\n// }) => {\n//   const maxAttempts = 3;\n//   const hasMaxAttempts = quizAttempts.length >= maxAttempts;\n//   const canRetake = attemptsLeft > 0 && quizScore < 70 && !hasMaxAttempts;\n//   const [isExpanded, setIsExpanded] = useState(true);\n\n//   // If no specific weak topics, use the quiz title as the general topic\n//   const effectiveWeakTopics =\n//     weakTopics.length > 0\n//       ? weakTopics\n//       : quizScore < 70\n//         ? [\"the quiz questions\"]\n//         : [];\n\n//   // Get all topics from questions (filtering out null/undefined)\n//   const allTopics = Array.from(\n//     new Set(\n//       currentQuiz?.questions?.map((q) => q.topic)?.filter((topic) => topic) // Remove null/undefined\n//     )\n//   );\n\n//   // If no specific topics exist in questions, use a generic message\n//   const hasSpecificTopics = allTopics.length > 0;\n\n//   // Animation variants\n//   const containerVariants = {\n//     hidden: { opacity: 0, y: 20 },\n//     visible: {\n//       opacity: 1,\n//       y: 0,\n//       transition: {\n//         duration: 0.3,\n//         ease: \"easeOut\",\n//       },\n//     },\n//   };\n\n//   const itemVariants = {\n//     hidden: { opacity: 0, y: 10 },\n//     visible: {\n//       opacity: 1,\n//       y: 0,\n//       transition: {\n//         duration: 0.2,\n//       },\n//     },\n//   };\n\n//   return (\n//     <div className=\"fixed inset-0 bg-black bg-opacity-50 p-6 flex items-center justify-center  z-40 transition-all duration-300 ease-out opacity-0 animate-fadeIn\">\n//       <div className=\"bg-white w-full max-w-2xl max-h-[90vh] space-y-5 rounded-xl shadow-lg border border-gray-100 p-5\">\n//         {/* Header with collapse button */}\n//         <div className=\"flex items-center justify-between\">\n//           <div className=\"flex items-center\">\n//             {quizScore >= 70 ? (\n//               <div className=\"p-2 bg-green-100 rounded-full mr-3\">\n//                 <FiCheck className=\"text-green-600 text-xl\" />\n//               </div>\n//             ) : (\n//               <div className=\"p-2 bg-yellow-100 rounded-full mr-3\">\n//                 <FiInfo className=\"text-yellow-600 text-xl\" />\n//               </div>\n//             )}\n//             <div>\n//               <h3 className=\"text-xl font-bold text-gray-800\">\n//                 Quiz {quizScore >= 70 ? \"Passed\" : \"Review Needed\"}\n//                 <span className=\"ml-2 px-3 py-1 rounded-full text-sm font-semibold bg-blue-100 text-blue-800\">\n//                   {quizScore}%\n//                 </span>\n//               </h3>\n//               <p className=\"text-sm text-gray-500\">\n//                 Best: {bestScore}% • Attempts: {quizAttempts.length}/\n//                 {maxAttempts}\n//               </p>\n//             </div>\n//           </div>\n//           <button\n//             onClick={() => setIsExpanded(!isExpanded)}\n//             className=\"p-2 rounded-full hover:bg-gray-100 transition-colors\"\n//           >\n//             <FiX className=\"text-gray-500\" />\n//           </button>\n//         </div>\n\n//         {isExpanded && (\n//           <div className=\"space-y-5 transition-all duration-300 ease-out\">\n//             {/* Review Section */}\n//             {quizScore < 70 ? (\n//               <div className=\"p-4 bg-gradient-to-r from-yellow-50 to-amber-50 rounded-lg border border-yellow-200 shadow-sm transition-all duration-200\">\n//                 <div className=\"flex items-start\">\n//                   <div className=\"p-2 bg-yellow-100 rounded-lg mr-3\">\n//                     <FiBookOpen className=\"text-yellow-600 text-xl\" />\n//                   </div>\n//                   <div>\n//                     <h4 className=\"font-bold text-gray-800 mb-2\">\n//                       Recommended Review\n//                     </h4>\n//                     <p className=\"text-gray-600 mb-3\">\n//                       {hasSpecificTopics\n//                         ? \"Focus on these topics before retrying:\"\n//                         : \"Review the quiz questions before retrying:\"}\n//                     </p>\n\n//                     {hasSpecificTopics ? (\n//                       <ul className=\"space-y-3\">\n//                         {effectiveWeakTopics.map((topic, i) => (\n//                           <li\n//                             key={i}\n//                             className=\"flex items-start bg-white p-3 rounded-lg shadow-xs border border-gray-100 transition-all duration-200 delay-100\"\n//                           >\n//                             <div className=\"p-1.5 bg-red-100 rounded-full mr-3\">\n//                               <FiAlertTriangle className=\"text-red-500\" />\n//                             </div>\n//                             <div>\n//                               <p className=\"font-medium text-gray-800\">\n//                                 {topic}\n//                               </p>\n//                               <Link\n//                                 to={`/courses/${courseId}/resources?topic=${encodeURIComponent(topic)}`}\n//                                 className=\"mt-1 inline-flex items-center text-sm text-blue-600 hover:text-blue-800 transition-colors\"\n//                               >\n//                                 Review Resources\n//                                 <svg\n//                                   className=\"w-4 h-4 ml-1\"\n//                                   fill=\"none\"\n//                                   stroke=\"currentColor\"\n//                                   viewBox=\"0 0 24 24\"\n//                                 >\n//                                   <path\n//                                     strokeLinecap=\"round\"\n//                                     strokeLinejoin=\"round\"\n//                                     strokeWidth={2}\n//                                     d=\"M14 5l7 7m0 0l-7 7m7-7H3\"\n//                                   />\n//                                 </svg>\n//                               </Link>\n//                             </div>\n//                           </li>\n//                         ))}\n//                       </ul>\n//                     ) : (\n//                       <div className=\"flex items-start bg-white p-3 rounded-lg shadow-xs border border-gray-100 transition-all duration-200 delay-100\">\n//                         <div className=\"p-1.5 bg-red-100 rounded-full mr-3\">\n//                           <FiAlertTriangle className=\"text-red-500\" />\n//                         </div>\n//                         <div>\n//                           <p className=\"font-medium text-gray-800\">\n//                             All quiz questions\n//                           </p>\n//                           <Link\n//                             to={`/courses/${courseId}/resources`}\n//                             className=\"mt-1 inline-flex items-center text-sm text-blue-600 hover:text-blue-800 transition-colors\"\n//                           >\n//                             Review Course Materials\n//                             <svg\n//                               className=\"w-4 h-4 ml-1\"\n//                               fill=\"none\"\n//                               stroke=\"currentColor\"\n//                               viewBox=\"0 0 24 24\"\n//                             >\n//                               <path\n//                                 strokeLinecap=\"round\"\n//                                 strokeLinejoin=\"round\"\n//                                 strokeWidth={2}\n//                                 d=\"M14 5l7 7m0 0l-7 7m7-7H3\"\n//                               />\n//                             </svg>\n//                           </Link>\n//                         </div>\n//                       </div>\n//                     )}\n//                   </div>\n//                 </div>\n//               </div>\n//             ) : (\n//               <div className=\"p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200 shadow-sm transition-all duration-200\">\n//                 <div className=\"flex items-start\">\n//                   <div className=\"p-2 bg-green-100 rounded-lg mr-3\">\n//                     <FiCheck className=\"text-green-600 text-xl\" />\n//                   </div>\n//                   <div>\n//                     <h4 className=\"font-bold text-gray-800 mb-2\">\n//                       Strong Understanding\n//                     </h4>\n//                     <p className=\"text-gray-600 mb-3\">\n//                       {hasSpecificTopics\n//                         ? \"You demonstrated mastery of:\"\n//                         : \"You demonstrated mastery of the quiz content\"}\n//                     </p>\n//                     {hasSpecificTopics && (\n//                       <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\n//                         {Array.from(\n//                           new Set(\n//                             currentQuiz.questions\n//                               .filter(\n//                                 (q) =>\n//                                   selectedAnswers[q.id] === q.correctAnswer &&\n//                                   q.topic\n//                               )\n//                               .map((q) => q.topic)\n//                           )\n//                         ).map((topic, i) => (\n//                           <div\n//                             key={i}\n//                             className=\"bg-white px-3 py-2 rounded-lg shadow-xs border border-gray-100 text-sm font-medium text-gray-700 transition-all duration-200\"\n//                           >\n//                             {topic}\n//                           </div>\n//                         ))}\n//                       </div>\n//                     )}\n//                   </div>\n//                 </div>\n//               </div>\n//             )}\n\n//             {/* Retake Section */}\n//             {hasMaxAttempts ? (\n//               <div className=\"pt-3 transition-all duration-200\">\n//                 <div className=\"flex items-start p-4 bg-gray-50 rounded-lg border border-gray-200\">\n//                   <div className=\"p-2 bg-gray-200 rounded-lg mr-3\">\n//                     <FiLock className=\"text-gray-600\" />\n//                   </div>\n//                   <div>\n//                     <h4 className=\"font-bold text-gray-800\">\n//                       Maximum Attempts Reached\n//                     </h4>\n//                     <p className=\"text-gray-600\">\n//                       You've used all {maxAttempts} attempts. Please proceed to\n//                       the next lesson.\n//                     </p>\n//                   </div>\n//                 </div>\n//               </div>\n//             ) : canRetake ? (\n//               <div className=\"pt-3 space-y-4 transition-all duration-200\">\n//                 <div className=\"flex items-start p-4 bg-blue-50 rounded-lg border border-blue-200\">\n//                   <div className=\"p-2 bg-blue-100 rounded-lg mr-3\">\n//                     <FiInfo className=\"text-blue-600\" />\n//                   </div>\n//                   <div>\n//                     <h4 className=\"font-bold text-gray-800\">\n//                       Ready for Retake?\n//                     </h4>\n//                     <p className=\"text-gray-600\">\n//                       After reviewing, you'll get a new set of questions on the\n//                       same\n//                       {hasSpecificTopics ? \" topics.\" : \" material.\"}\n//                     </p>\n//                   </div>\n//                 </div>\n//                 <button\n//                   onClick={prepareQuizRetake}\n//                   className=\"w-full px-6 py-3 bg-gradient-to-r from-yellow-400 to-amber-500 hover:from-yellow-500 hover:to-amber-600 text-white font-semibold rounded-lg shadow-md transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98]\"\n//                 >\n//                   Retake Quiz ({attemptsLeft}{\" \"}\n//                   {attemptsLeft === 1 ? \"attempt\" : \"attempts\"} left)\n//                 </button>\n//               </div>\n//             ) : null}\n//           </div>\n//         )}\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default QuizReviewSection;\nimport {\n  FiAlertTriangle,\n  FiBookOpen,\n  FiCheck,\n  FiInfo,\n  FiLock,\n  FiX,\n} from \"react-icons/fi\";\nimport { Link } from \"react-router-dom\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { useState, useEffect } from \"react\";\n\nconst QuizReviewSection = ({\n  quizScore,\n  bestScore,\n  quizAttempts,\n  weakTopics,\n  currentQuiz,\n  selectedAnswers,\n  attemptsLeft,\n  courseId,\n  prepareQuizRetake,\n  onClose,\n}) => {\n  const maxAttempts = 3;\n  const hasMaxAttempts = quizAttempts.length >= maxAttempts;\n  const canRetake = attemptsLeft > 0 && quizScore < 70 && !hasMaxAttempts;\n  const [isExpanded, setIsExpanded] = useState(true);\n\n  // Get all topics from questions (filtering out null/undefined)\n  const allTopics = Array.from(\n    new Set(\n      currentQuiz?.questions?.map((q) => q.topic)?.filter((topic) => topic)\n    )\n  );\n\n  const hasSpecificTopics = allTopics.length > 0;\n\n  // Handle ESC key press\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      if (e.key === \"Escape\") {\n        onClose();\n      }\n    };\n\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\n  }, [onClose]);\n\n  // Handle backdrop click\n  const handleBackdropClick = (e) => {\n    if (e.target === e.currentTarget) {\n      onClose();\n    }\n  };\n\n  // Animation variants\n  const containerVariants = {\n    hidden: { opacity: 0, y: 20 },\n    visible: {\n      opacity: 1,\n      y: 0,\n      transition: {\n        duration: 0.3,\n        ease: \"easeOut\",\n      },\n    },\n  };\n\n  const itemVariants = {\n    hidden: { opacity: 0, y: 10 },\n    visible: {\n      opacity: 1,\n      y: 0,\n      transition: {\n        duration: 0.2,\n      },\n    },\n  };\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black bg-opacity-50 p-6 flex items-center justify-center z-50 transition-opacity duration-300\"\n      onClick={handleBackdropClick}\n    >\n      <motion.div\n        className=\"bg-white w-full max-w-2xl max-h-[90vh] rounded-xl shadow-lg border border-gray-100 overflow-hidden\"\n        initial=\"hidden\"\n        animate=\"visible\"\n        variants={containerVariants}\n      >\n        <div className=\"p-5 space-y-5\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center\">\n              {quizScore >= 70 ? (\n                <div className=\"p-2 bg-green-100 rounded-full mr-3\">\n                  <FiCheck className=\"text-green-600 text-xl\" />\n                </div>\n              ) : (\n                <div className=\"p-2 bg-yellow-100 rounded-full mr-3\">\n                  <FiInfo className=\"text-yellow-600 text-xl\" />\n                </div>\n              )}\n              <div>\n                <h3 className=\"text-xl font-bold text-gray-800\">\n                  Quiz {quizScore >= 70 ? \"Passed\" : \"Review Needed\"}\n                  <span className=\"ml-2 px-3 py-1 rounded-full text-sm font-semibold bg-blue-100 text-blue-800\">\n                    {quizScore}%\n                  </span>\n                </h3>\n                <p className=\"text-sm text-gray-500\">\n                  Best: {bestScore}% • Attempts: {quizAttempts.length}/\n                  {maxAttempts}\n                </p>\n              </div>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"p-2 rounded-full hover:bg-gray-100 transition-colors\"\n              aria-label=\"Close review\"\n            >\n              <FiX className=\"text-gray-500\" />\n            </button>\n          </div>\n\n          <AnimatePresence>\n            {isExpanded && (\n              <motion.div\n                className=\"space-y-5\"\n                initial=\"hidden\"\n                animate=\"visible\"\n                exit=\"hidden\"\n                variants={containerVariants}\n              >\n                {/* Content */}\n                {quizScore < 70 ? (\n                  <motion.div\n                    className=\"p-4 bg-gradient-to-r from-yellow-50 to-amber-50 rounded-lg border border-yellow-200 shadow-sm\"\n                    variants={itemVariants}\n                  >\n                    <div className=\"flex items-start\">\n                      <div className=\"p-2 bg-yellow-100 rounded-lg mr-3\">\n                        <FiBookOpen className=\"text-yellow-600 text-xl\" />\n                      </div>\n                      <div>\n                        <h4 className=\"font-bold text-gray-800 mb-2\">\n                          Recommended Review\n                        </h4>\n                        <p className=\"text-gray-600 mb-3\">\n                          {hasSpecificTopics\n                            ? \"Focus on these topics before retrying:\"\n                            : \"Review the quiz questions before retrying:\"}\n                        </p>\n\n                        {hasSpecificTopics ? (\n                          <ul className=\"space-y-3\">\n                            {weakTopics.map((topic, i) => (\n                              <motion.li\n                                key={i}\n                                className=\"flex items-start bg-white p-3 rounded-lg shadow-xs border border-gray-100\"\n                                variants={itemVariants}\n                              >\n                                <div className=\"p-1.5 bg-red-100 rounded-full mr-3\">\n                                  <FiAlertTriangle className=\"text-red-500\" />\n                                </div>\n                                <div>\n                                  <p className=\"font-medium text-gray-800\">\n                                    {topic}\n                                  </p>\n                                  <Link\n                                    to={`/courses/${courseId}/resources?topic=${encodeURIComponent(topic)}`}\n                                    className=\"mt-1 inline-flex items-center text-sm text-blue-600 hover:text-blue-800\"\n                                  >\n                                    Review Resources\n                                    <svg\n                                      className=\"w-4 h-4 ml-1\"\n                                      fill=\"none\"\n                                      stroke=\"currentColor\"\n                                      viewBox=\"0 0 24 24\"\n                                    >\n                                      <path\n                                        strokeLinecap=\"round\"\n                                        strokeLinejoin=\"round\"\n                                        strokeWidth={2}\n                                        d=\"M14 5l7 7m0 0l-7 7m7-7H3\"\n                                      />\n                                    </svg>\n                                  </Link>\n                                </div>\n                              </motion.li>\n                            ))}\n                          </ul>\n                        ) : (\n                          <motion.div\n                            className=\"flex items-start bg-white p-3 rounded-lg shadow-xs border border-gray-100\"\n                            variants={itemVariants}\n                          >\n                            <div className=\"p-1.5 bg-red-100 rounded-full mr-3\">\n                              <FiAlertTriangle className=\"text-red-500\" />\n                            </div>\n                            <div>\n                              <p className=\"font-medium text-gray-800\">\n                                All quiz questions\n                              </p>\n                              <Link\n                                to={`/courses/${courseId}/resources`}\n                                className=\"mt-1 inline-flex items-center text-sm text-blue-600 hover:text-blue-800\"\n                              >\n                                Review Course Materials\n                                <svg\n                                  className=\"w-4 h-4 ml-1\"\n                                  fill=\"none\"\n                                  stroke=\"currentColor\"\n                                  viewBox=\"0 0 24 24\"\n                                >\n                                  <path\n                                    strokeLinecap=\"round\"\n                                    strokeLinejoin=\"round\"\n                                    strokeWidth={2}\n                                    d=\"M14 5l7 7m0 0l-7 7m7-7H3\"\n                                  />\n                                </svg>\n                              </Link>\n                            </div>\n                          </motion.div>\n                        )}\n                      </div>\n                    </div>\n                  </motion.div>\n                ) : (\n                  <motion.div\n                    className=\"p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200 shadow-sm\"\n                    variants={itemVariants}\n                  >\n                    <div className=\"flex items-start\">\n                      <div className=\"p-2 bg-green-100 rounded-lg mr-3\">\n                        <FiCheck className=\"text-green-600 text-xl\" />\n                      </div>\n                      <div>\n                        <h4 className=\"font-bold text-gray-800 mb-2\">\n                          Strong Understanding\n                        </h4>\n                        <p className=\"text-gray-600 mb-3\">\n                          {hasSpecificTopics\n                            ? \"You demonstrated mastery of:\"\n                            : \"You demonstrated mastery of the quiz content\"}\n                        </p>\n                        {hasSpecificTopics && (\n                          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\n                            {Array.from(\n                              new Set(\n                                currentQuiz.questions\n                                  .filter(\n                                    (q) =>\n                                      selectedAnswers[q.id] ===\n                                        q.correctAnswer && q.topic\n                                  )\n                                  .map((q) => q.topic)\n                              )\n                            ).map((topic, i) => (\n                              <motion.div\n                                key={i}\n                                className=\"bg-white px-3 py-2 rounded-lg shadow-xs border border-gray-100 text-sm font-medium text-gray-700\"\n                                variants={itemVariants}\n                              >\n                                {topic}\n                              </motion.div>\n                            ))}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </motion.div>\n                )}\n\n                {/* Retake Section */}\n                {hasMaxAttempts ? (\n                  <motion.div className=\"pt-3\" variants={itemVariants}>\n                    <div className=\"flex items-start p-4 bg-gray-50 rounded-lg border border-gray-200\">\n                      <div className=\"p-2 bg-gray-200 rounded-lg mr-3\">\n                        <FiLock className=\"text-gray-600\" />\n                      </div>\n                      <div>\n                        <h4 className=\"font-bold text-gray-800\">\n                          Maximum Attempts Reached\n                        </h4>\n                        <p className=\"text-gray-600\">\n                          You've used all {maxAttempts} attempts. Please proceed\n                          to the next lesson.\n                        </p>\n                      </div>\n                    </div>\n                  </motion.div>\n                ) : canRetake ? (\n                  <motion.div\n                    className=\"pt-3 space-y-4\"\n                    variants={itemVariants}\n                  >\n                    <div className=\"flex items-start p-4 bg-blue-50 rounded-lg border border-blue-200\">\n                      <div className=\"p-2 bg-blue-100 rounded-lg mr-3\">\n                        <FiInfo className=\"text-blue-600\" />\n                      </div>\n                      <div>\n                        <h4 className=\"font-bold text-gray-800\">\n                          Ready for Retake?\n                        </h4>\n                        <p className=\"text-gray-600\">\n                          After reviewing, you'll get a new set of questions on\n                          the same {hasSpecificTopics ? \"topics.\" : \"material.\"}\n                        </p>\n                      </div>\n                    </div>\n                    <button\n                      onClick={prepareQuizRetake}\n                      className=\"w-full px-6 py-3 bg-gradient-to-r from-yellow-400 to-amber-500 hover:from-yellow-500 hover:to-amber-600 text-white font-semibold rounded-lg shadow-md transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98]\"\n                    >\n                      Retake Quiz ({attemptsLeft}{\" \"}\n                      {attemptsLeft === 1 ? \"attempt\" : \"attempts\"} left)\n                    </button>\n                  </motion.div>\n                ) : null}\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </div>\n      </motion.div>\n    </div>\n  );\n};\n\nexport default QuizReviewSection;"],"names":["_ref","currentLesson","notes","setNotes","handleNoteSave","handleVideoEnded","quizCompleted","currentQuiz","quizScore","bestScore","quizAttempts","weakTopics","attemptsLeft","selectedAnswers","courseId","prepareQuizRetake","isSaving","setIsSaving","useState","_jsx","className","children","_jsxs","title","videoUrl","controls","onEnded","autoPlay","src","type","QuizReviewSection","dangerouslySetInnerHTML","__html","content","value","onChange","e","target","placeholder","onClick","async","disabled","_currentQuiz$question","_currentQuiz$question2","onClose","hasMaxAttempts","length","canRetake","isExpanded","setIsExpanded","hasSpecificTopics","Array","from","Set","questions","map","q","topic","filter","useEffect","handleKeyDown","key","window","addEventListener","removeEventListener","containerVariants","hidden","opacity","y","visible","transition","duration","ease","itemVariants","currentTarget","motion","div","initial","animate","variants","FiCheck","FiInfo","FiX","AnimatePresence","exit","FiBookOpen","i","li","FiAlertTriangle","Link","to","encodeURIComponent","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","id","correctAnswer","FiLock"],"sourceRoot":""}