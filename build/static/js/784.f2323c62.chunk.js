"use strict";(self.webpackChunkcourseconnect=self.webpackChunkcourseconnect||[]).push([[153,784],{2784:(e,s,t)=>{t.r(s),t.d(s,{default:()=>i});var r=t(5043),l=t(4153),a=t(579);const i=e=>{let{currentLesson:s,notes:t,setNotes:i,handleNoteSave:d,handleVideoEnded:o,quizCompleted:n,currentQuiz:c,quizScore:m,bestScore:x,quizAttempts:u,weakTopics:h,attemptsLeft:g,selectedAnswers:b,courseId:p,prepareQuizRetake:v}=e;const[j,f]=(0,r.useState)(!1);return(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6 bg-white",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-xl lg:text-2xl font-bold mb-4",children:s.title}),s.videoUrl&&(0,a.jsx)("div",{className:"mb-6 aspect-w-16 aspect-h-9 bg-black rounded-lg overflow-hidden",children:(0,a.jsxs)("video",{controls:!0,className:"w-full h-full object-cover",onEnded:o,autoPlay:!0,children:[(0,a.jsx)("source",{src:s.videoUrl,type:"video/mp4"}),"Your browser does not support the video tag."]})}),n&&(0,a.jsx)(l.default,{quizScore:m,bestScore:x,quizAttempts:u,weakTopics:h,currentQuiz:c,selectedAnswers:b,attemptsLeft:g,courseId:p,prepareQuizRetake:v}),(0,a.jsx)("div",{className:"mb-6 lg:mb-8 h-[70vh] overflow-y-auto",children:(0,a.jsx)("div",{className:"prose max-w-none w-full text-left",dangerouslySetInnerHTML:{__html:s.content}})}),(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-4 lg:pt-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-3 lg:mb-4",children:"Your Notes"}),(0,a.jsx)("textarea",{value:t,onChange:e=>i(e.target.value),className:"w-full h-32 lg:h-40 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm lg:text-base",placeholder:"Write your notes here..."}),(0,a.jsx)("div",{className:"flex justify-end mt-2",children:(0,a.jsx)("button",{onClick:async()=>{f(!0),await d(),f(!1)},disabled:j,className:"px-3 py-1.5 lg:px-4 lg:py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm lg:text-base disabled:opacity-50",children:j?"Saving...":"Save Notes"})})]})]})})}},4153:(e,s,t)=>{t.r(s),t.d(s,{default:()=>n});var r=t(5200),l=t(5475),a=t(531),i=t(3546),d=t(5043),o=t(579);const n=e=>{var s,t;let{quizScore:n,bestScore:c,quizAttempts:m,weakTopics:x,currentQuiz:u,selectedAnswers:h,attemptsLeft:g,courseId:b,prepareQuizRetake:p,onClose:v}=e;const j=m.length>=3,f=g>0&&n<70&&!j,[N,y]=(0,d.useState)(!0),w=Array.from(new Set(null===u||void 0===u||null===(s=u.questions)||void 0===s||null===(t=s.map((e=>e.topic)))||void 0===t?void 0:t.filter((e=>e)))).length>0;(0,d.useEffect)((()=>{const e=e=>{"Escape"===e.key&&v()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[v]);const k={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}}},z={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.2}}};return(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 p-6 flex items-center justify-center z-50 transition-opacity duration-300",onClick:e=>{e.target===e.currentTarget&&v()},children:(0,o.jsx)(a.P.div,{className:"bg-white w-full max-w-2xl max-h-[90vh] rounded-xl shadow-lg border border-gray-100 overflow-hidden",initial:"hidden",animate:"visible",variants:k,children:(0,o.jsxs)("div",{className:"p-5 space-y-5",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[n>=70?(0,o.jsx)("div",{className:"p-2 bg-green-100 rounded-full mr-3",children:(0,o.jsx)(r.YrT,{className:"text-green-600 text-xl"})}):(0,o.jsx)("div",{className:"p-2 bg-yellow-100 rounded-full mr-3",children:(0,o.jsx)(r.S8s,{className:"text-yellow-600 text-xl"})}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("h3",{className:"text-xl font-bold text-gray-800",children:["Quiz ",n>=70?"Passed":"Review Needed",(0,o.jsxs)("span",{className:"ml-2 px-3 py-1 rounded-full text-sm font-semibold bg-blue-100 text-blue-800",children:[n,"%"]})]}),(0,o.jsxs)("p",{className:"text-sm text-gray-500",children:["Best: ",c,"% \u2022 Attempts: ",m.length,"/",3]})]})]}),(0,o.jsx)("button",{onClick:v,className:"p-2 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Close review",children:(0,o.jsx)(r.yGN,{className:"text-gray-500"})})]}),(0,o.jsx)(i.N,{children:N&&(0,o.jsxs)(a.P.div,{className:"space-y-5",initial:"hidden",animate:"visible",exit:"hidden",variants:k,children:[n<70?(0,o.jsx)(a.P.div,{className:"p-4 bg-gradient-to-r from-yellow-50 to-amber-50 rounded-lg border border-yellow-200 shadow-sm",variants:z,children:(0,o.jsxs)("div",{className:"flex items-start",children:[(0,o.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg mr-3",children:(0,o.jsx)(r.D1A,{className:"text-yellow-600 text-xl"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"font-bold text-gray-800 mb-2",children:"Recommended Review"}),(0,o.jsx)("p",{className:"text-gray-600 mb-3",children:w?"Focus on these topics before retrying:":"Review the quiz questions before retrying:"}),w?(0,o.jsx)("ul",{className:"space-y-3",children:x.map(((e,s)=>(0,o.jsxs)(a.P.li,{className:"flex items-start bg-white p-3 rounded-lg shadow-xs border border-gray-100",variants:z,children:[(0,o.jsx)("div",{className:"p-1.5 bg-red-100 rounded-full mr-3",children:(0,o.jsx)(r.eHT,{className:"text-red-500"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"font-medium text-gray-800",children:e}),(0,o.jsxs)(l.N_,{to:`/courses/${b}/resources?topic=${encodeURIComponent(e)}`,className:"mt-1 inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:["Review Resources",(0,o.jsx)("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})]})]},s)))}):(0,o.jsxs)(a.P.div,{className:"flex items-start bg-white p-3 rounded-lg shadow-xs border border-gray-100",variants:z,children:[(0,o.jsx)("div",{className:"p-1.5 bg-red-100 rounded-full mr-3",children:(0,o.jsx)(r.eHT,{className:"text-red-500"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"font-medium text-gray-800",children:"All quiz questions"}),(0,o.jsxs)(l.N_,{to:`/courses/${b}/resources`,className:"mt-1 inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:["Review Course Materials",(0,o.jsx)("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})]})]})]})]})}):(0,o.jsx)(a.P.div,{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200 shadow-sm",variants:z,children:(0,o.jsxs)("div",{className:"flex items-start",children:[(0,o.jsx)("div",{className:"p-2 bg-green-100 rounded-lg mr-3",children:(0,o.jsx)(r.YrT,{className:"text-green-600 text-xl"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"font-bold text-gray-800 mb-2",children:"Strong Understanding"}),(0,o.jsx)("p",{className:"text-gray-600 mb-3",children:w?"You demonstrated mastery of:":"You demonstrated mastery of the quiz content"}),w&&(0,o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:Array.from(new Set(u.questions.filter((e=>h[e.id]===e.correctAnswer&&e.topic)).map((e=>e.topic)))).map(((e,s)=>(0,o.jsx)(a.P.div,{className:"bg-white px-3 py-2 rounded-lg shadow-xs border border-gray-100 text-sm font-medium text-gray-700",variants:z,children:e},s)))})]})]})}),j?(0,o.jsx)(a.P.div,{className:"pt-3",variants:z,children:(0,o.jsxs)("div",{className:"flex items-start p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,o.jsx)("div",{className:"p-2 bg-gray-200 rounded-lg mr-3",children:(0,o.jsx)(r.F5$,{className:"text-gray-600"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"font-bold text-gray-800",children:"Maximum Attempts Reached"}),(0,o.jsxs)("p",{className:"text-gray-600",children:["You've used all ",3," attempts. Please proceed to the next lesson."]})]})]})}):f?(0,o.jsxs)(a.P.div,{className:"pt-3 space-y-4",variants:z,children:[(0,o.jsxs)("div",{className:"flex items-start p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,o.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg mr-3",children:(0,o.jsx)(r.S8s,{className:"text-blue-600"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"font-bold text-gray-800",children:"Ready for Retake?"}),(0,o.jsxs)("p",{className:"text-gray-600",children:["After reviewing, you'll get a new set of questions on the same ",w?"topics.":"material."]})]})]}),(0,o.jsxs)("button",{onClick:p,className:"w-full px-6 py-3 bg-gradient-to-r from-yellow-400 to-amber-500 hover:from-yellow-500 hover:to-amber-600 text-white font-semibold rounded-lg shadow-md transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98]",children:["Retake Quiz (",g," ",1===g?"attempt":"attempts"," left)"]})]}):null]})})]})})})}}}]);
//# sourceMappingURL=784.f2323c62.chunk.js.map